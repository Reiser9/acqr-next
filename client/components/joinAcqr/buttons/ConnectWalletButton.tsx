import React, { useEffect } from 'react'
import ConnectWalletButtonProps from '../../../interfaces/ConnectWalletButtonProps'
import { useWeb3 } from '../../../wallets/hooks'

export default function ConnectWalletButton({
  walletConnected,
  setWalletConnected,
}: ConnectWalletButtonProps) {
  const { web3Provider, connect, disconnect } = useWeb3()

  useEffect(() => {
    // Create an scoped async function in the hook
    async function anyNameFunction() {
      if (web3Provider) {
        const signer = web3Provider.getSigner()
        const address = await signer.getAddress()
        setWalletConnected(address)
      }
    }
    // Execute the created function directly
    anyNameFunction()
  }, [connect, web3Provider])

  var classNames = require('classnames')
  return (
    <>
      <div className="join__button">
        <button className="join__button--content" onClick={() => connect()}>
          <div
            className={classNames(
              'join__inner--button blue__button black__button'
            )}
          >
            <div className="wallet__connect">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 490.593 490.593"
                xmlSpace="preserve"
                width="28"
                height="22"
              >
                <path d="M480.093 164.777h-22.995v-68.03c0-17.491-14.23-31.721-31.721-31.721H31.721C14.23 65.026 0 79.256 0 96.747v297.098c0 17.491 14.23 31.722 31.721 31.722h393.656c17.491 0 31.721-14.23 31.721-31.722v-68.03h22.995c5.799 0 10.5-4.701 10.5-10.5V175.277c0-5.799-4.701-10.5-10.5-10.5zM31.721 86.026h393.656c5.911 0 10.721 4.81 10.721 10.721v20.557H21V96.747c0-5.912 4.809-10.721 10.721-10.721zm393.656 318.541H31.721c-5.912 0-10.721-4.81-10.721-10.722v-20.557h415.098v20.557c0 5.912-4.81 10.722-10.721 10.722zm10.721-52.278H21V138.304h415.098v26.473h-75.321c-44.398 0-80.52 36.121-80.52 80.519s36.121 80.518 80.52 80.518h75.321v26.475zm33.495-47.474H360.776c-32.819 0-59.52-26.7-59.52-59.518 0-32.819 26.7-59.519 59.52-59.519h108.816v119.037z" />
                <path d="M317.909 244.327c0 22.161 18.029 40.19 40.19 40.19 22.161 0 40.191-18.029 40.191-40.19 0-22.161-18.03-40.191-40.191-40.191s-40.19 18.029-40.19 40.191zm59.381 0c0 10.581-8.609 19.19-19.191 19.19-10.581 0-19.19-8.609-19.19-19.19 0-10.582 8.608-19.191 19.19-19.191s19.191 8.609 19.191 19.191z" />
              </svg>

              <span className="join__button--text">Connect Wallet</span>
            </div>
            
            <span className="mr-4 ">
              {walletConnected && (
                <svg
                  className="mob__svg"
                  width="95"
                  height="25"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <rect
                    opacity=".4"
                    width="95"
                    height="25"
                    rx="5"
                    fill="#168C2A"
                  />
                  <path
                    className="mob"
                    d="M35.095 17 31.3 7.265h1.575l3.27 8.61h-.45l3.27-8.61h1.545L36.745 17h-1.65Zm11.62-2.43h1.364c-.08.49-.27.93-.57 1.32-.3.39-.695.7-1.185.93-.49.23-1.065.345-1.725.345-.78 0-1.475-.165-2.085-.495a3.71 3.71 0 0 1-1.44-1.365c-.35-.58-.525-1.255-.525-2.025 0-.78.17-1.46.51-2.04.34-.59.81-1.05 1.41-1.38.6-.33 1.285-.495 2.055-.495.81 0 1.49.16 2.04.48.55.32.955.795 1.215 1.425.27.62.38 1.395.33 2.325h-6.135c.05.45.185.85.405 1.2.23.35.53.625.9.825.38.2.815.3 1.305.3.55 0 1.01-.125 1.38-.375.37-.25.62-.575.75-.975Zm-2.176-3.975c-.65 0-1.19.175-1.62.525-.43.34-.715.795-.855 1.365h4.605c-.04-.61-.26-1.075-.66-1.395-.4-.33-.89-.495-1.47-.495Zm5.087-1.08h1.44V17h-1.44V9.515ZM53.6 10.79c-.52 0-.965.12-1.335.36-.36.24-.65.535-.87.885-.21.35-.35.685-.42 1.005l-.015-.855c.01-.1.035-.255.075-.465.05-.22.135-.465.255-.735.12-.27.28-.525.48-.765.2-.25.45-.455.75-.615.3-.16.66-.24 1.08-.24v1.425Zm3.023-4.365V7.97H54.84V6.425h1.785Zm-1.605 3.09h1.425V17H55.02V9.515Zm7.25 1.545V9.83h3.254v1.23h-3.255Zm2.04-1.23h1.424V17h-1.425V9.83ZM59.402 17V9.08l1.425.075V17h-1.425Zm2.64-10.485h3.69v1.32h-3.54c-.26-.01-.495.025-.705.105a.91.91 0 0 0-.495.39c-.11.19-.165.465-.165.825l-1.425-.075c0-.6.105-1.09.315-1.47.22-.38.53-.655.93-.825.4-.18.865-.27 1.395-.27ZM57.948 9.83h4.905v1.23h-4.905V9.83Zm15.412 4.74h1.365c-.08.49-.27.93-.57 1.32-.3.39-.695.7-1.185.93-.49.23-1.065.345-1.725.345-.78 0-1.475-.165-2.085-.495a3.71 3.71 0 0 1-1.44-1.365c-.35-.58-.525-1.255-.525-2.025 0-.78.17-1.46.51-2.04.34-.59.81-1.05 1.41-1.38.6-.33 1.285-.495 2.055-.495.81 0 1.49.16 2.04.48.55.32.955.795 1.215 1.425.27.62.38 1.395.33 2.325H68.62c.05.45.185.85.405 1.2.23.35.53.625.9.825.38.2.815.3 1.305.3.55 0 1.01-.125 1.38-.375.37-.25.62-.575.75-.975Zm-2.175-3.975c-.65 0-1.19.175-1.62.525-.43.34-.715.795-.855 1.365h4.605c-.04-.61-.26-1.075-.66-1.395-.4-.33-.89-.495-1.47-.495Zm8.176 6.555c-.65 0-1.24-.165-1.77-.495-.53-.33-.95-.785-1.26-1.365-.3-.59-.45-1.265-.45-2.025s.15-1.43.45-2.01c.3-.59.71-1.05 1.23-1.38.52-.34 1.12-.51 1.8-.51.59 0 1.08.1 1.47.3.39.2.695.48.915.84.22.36.375.775.465 1.245.1.47.15.975.15 1.515 0 .4-.05.825-.15 1.275-.1.45-.26.875-.48 1.275-.22.4-.525.725-.915.975-.39.24-.875.36-1.455.36Zm.405-1.245c.53 0 .975-.115 1.335-.345.37-.24.645-.56.825-.96.18-.4.27-.845.27-1.335 0-.53-.095-.995-.285-1.395-.18-.4-.455-.71-.825-.93-.36-.22-.8-.33-1.32-.33-.78 0-1.385.25-1.815.75-.42.5-.63 1.135-.63 1.905 0 .52.105.98.315 1.38.21.39.495.7.855.93.37.22.795.33 1.275.33Zm2.43-9.39h1.44V17h-1.32c-.03-.22-.06-.49-.09-.81-.02-.32-.03-.595-.03-.825v-8.85Z"
                    fill="#81EC87"
                  />
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M12.692 16.429 14.308 18 24 8.571 22.385 7l-9.693 9.429Z"
                    fill="#81EC87"
                  />
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M15.923 16.429 14.308 18 10 13.81l1.615-1.572 4.308 4.19Z"
                    fill="#81EC87"
                  />
                </svg>
              )}
            </span>
          </div>
        </button>
        {/* DROPDOWN */}
        <div
          className={classNames(
            'ml-10 hidden h-[5rem] w-5/6 rounded-b-xl bg-white'
          )}
        >
          <svg
            width="15"
            height="12"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M14.66 1.385a5.729 5.729 0 0 1-.725.258c.293-.324.516-.705.653-1.122a.233.233 0 0 0-.08-.257.247.247 0 0 0-.274-.018 5.786 5.786 0 0 1-1.688.652A3.275 3.275 0 0 0 10.293 0c-1.776 0-3.22 1.411-3.22 3.146 0 .137.008.273.026.407A8.304 8.304 0 0 1 1.44.62a.244.244 0 0 0-.206-.086.242.242 0 0 0-.19.116 3.09 3.09 0 0 0 .33 3.622 2.76 2.76 0 0 1-.431-.188.247.247 0 0 0-.238.001.236.236 0 0 0-.122.2v.042c0 1.131.623 2.15 1.576 2.705a2.849 2.849 0 0 1-.245-.034.245.245 0 0 0-.226.075.232.232 0 0 0-.05.23 3.192 3.192 0 0 0 2.36 2.108c-.911.557-1.953.85-3.046.85-.228 0-.457-.014-.682-.04a.242.242 0 0 0-.256.155.234.234 0 0 0 .097.28A8.832 8.832 0 0 0 4.807 12c3.279 0 5.33-1.51 6.473-2.778 1.425-1.58 2.243-3.671 2.243-5.738 0-.086-.002-.173-.004-.26a6.177 6.177 0 0 0 1.44-1.49.232.232 0 0 0-.016-.284.244.244 0 0 0-.283-.065Z"
              fill="#fff"
            />
          </svg>

          <button
            className="mb- ml-12 h-14 w-3/5  rounded-xl bg-[#404EED] p-3 px-6"
            onClick={() => alert('Connect')}
          >
            <span className="flex">
              <svg
                width="20"
                height="16"
                viewBox="0 0 20 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M16.9418 1.34026C15.6472 0.713731 14.2629 0.259171 12.8152 0C12.6371 0.331836 12.4301 0.779129 12.2863 1.13438C10.7481 0.895393 9.22388 0.895393 7.71374 1.13438C7.57078 0.779129 7.35828 0.331836 7.17937 0C5.73017 0.259171 4.34425 0.715345 3.04973 1.34349C0.438825 5.42161 -0.268981 9.39799 0.0849219 13.3187C1.81693 14.6557 3.49504 15.4671 5.1458 15.9984C5.55361 15.4187 5.91689 14.8026 6.22938 14.1535C5.6333 13.9194 5.06221 13.6303 4.52237 13.2953C4.66534 13.1854 4.80518 13.0708 4.94112 12.9529C8.23171 14.5435 11.8074 14.5435 15.059 12.9529C15.1957 13.0708 15.3355 13.1854 15.4777 13.2953C14.9363 13.6319 14.3637 13.921 13.7676 14.1551C14.0809 14.8026 14.4426 15.4203 14.8512 16C16.5027 15.4687 18.1832 14.6565 19.9152 13.3187C20.33 8.77388 19.205 4.83383 16.9418 1.34026ZM6.67704 10.907C5.68955 10.907 4.8794 9.95428 4.8794 8.79326C4.8794 7.63224 5.67236 6.6779 6.67704 6.6779C7.68249 6.6779 8.49264 7.63062 8.47467 8.79326C8.47702 9.95428 7.68249 10.907 6.67704 10.907ZM13.3223 10.907C12.3348 10.907 11.5246 9.95428 11.5246 8.79326C11.5246 7.63224 12.3176 6.6779 13.3223 6.6779C14.3277 6.6779 15.1379 7.63062 15.1199 8.79326C15.1199 9.95428 14.327 10.907 13.3223 10.907Z"
                  fill="white"
                />
              </svg>
              <p className="ml-10">Join Discord</p>
            </span>
          </button>
        </div>
      </div>
    </>
  )
}
